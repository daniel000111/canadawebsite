<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BTE Canada - Login</title>
  <link rel="icon" href="assets/logo-square.png" type="image/png" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- NAVBAR -->
  <header class="nav-wrap">
    <nav class="nav">
      <div class="nav-left fade-in fade-delay-1">
        <a href="index.html" class="brand">
          <img src="assets/logo-square.png" alt="BTE Canada Logo" class="nav-logo" />
          <span class="brand-text">BTE CANADA</span>
        </a>
      </div>

      <div class="nav-center fade-in fade-delay-2">
        <a href="index.html">Home</a>
        <a href="showcase.html">Showcase</a>
        <a href="visit.html">Visit</a>
        <a href="build.html">Build</a>
        <a href="docs.html">Docs</a>
        <a href="map.html">Map</a>
      </div>

          <div class="nav-right fade-in fade-delay-3">
      <a class="icon-btn" href="https://discord.gg/pnPSvpfhAs" target="_blank" aria-label="Discord">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M20.317 4.369a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.211.375-.444.864-.608 1.249a18.27 18.27 0 0 0-5.487 0c-.164-.385-.397-.874-.608-1.249a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.683 4.37a.07.07 0 0 0-.032.027C.533 9.045-.32 13.58.099 18.057a.082.082 0 0 0 .031.056 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.461-.63.873-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128c.126-.094.252-.192.371-.291a.074.074 0 0 1 .077-.01c3.927 1.793 8.18 1.793 12.061 0a.074.074 0 0 1 .078.01c.12.099.245.197.372.291a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.106c.36.699.772 1.364 1.225 1.994a.076.076 0 0 0 .084.028 19.9 19.9 0 0 0 5.994-3.03.077.077 0 0 0 .03-.056c.5-5.177-.838-9.673-3.548-13.66a.061.061 0 0 0-.031-.03z"/>
        </svg>
      </a>
      <a class="icon-btn" href="https://www.instagram.com/bte.canada/" target="_blank" aria-label="Instagram">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M7 2C4.243 2 2 4.243 2 7v10c0 2.757 2.243 5 5 5h10c2.757 0 5-2.243 5-5V7c0-2.757-2.243-5-5-5H7zm10 2a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3V7a3 3 0 0 1 3-3h10zm-5 3a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm0 2a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm4.75-.75a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5z"/>
        </svg>
      </a>
      <a class="icon-btn" href="https://www.tiktok.com/@btecanada" target="_blank" aria-label="TikTok">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M16.5 3a5.5 5.5 0 0 0 4 1.8V8a8.4 8.4 0 0 1-4-1.1v6.6a6.5 6.5 0 1 1-6.5-6.5c.3 0 .6 0 .9.1V10a3.5 3.5 0 1 0 2.6 3.4V3h3z"/>
        </svg>
      </a>
      <div class="settings-wrap">
        <button class="settings-btn" type="button" aria-haspopup="true" aria-expanded="false" aria-label="Open settings" onclick="toggleSettingsMenu(event)">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M19.14 12.94a7.94 7.94 0 0 0 .05-.94 7.94 7.94 0 0 0-.05-.94l2.03-1.58a.5.5 0 0 0 .12-.64l-1.92-3.32a.5.5 0 0 0-.6-.22l-2.39.96a7.6 7.6 0 0 0-1.63-.94l-.36-2.54a.5.5 0 0 0-.5-.42h-3.84a.5.5 0 0 0-.5.42l-.36 2.54c-.58.22-1.12.52-1.63.94l-2.39-.96a.5.5 0 0 0-.6.22L2.75 8.86a.5.5 0 0 0 .12.64l2.03 1.58c-.03.31-.05.63-.05.94s.02.63.05.94l-2.03 1.58a.5.5 0 0 0-.12.64l1.92 3.32a.5.5 0 0 0 .6.22l2.39-.96c.5.42 1.05.72 1.63.94l.36 2.54a.5.5 0 0 0 .5.42h3.84a.5.5 0 0 0 .5-.42l.36-2.54c.58-.22 1.12-.52 1.63-.94l2.39.96a.5.5 0 0 0 .6-.22l1.92-3.32a.5.5 0 0 0-.12-.64l-2.03-1.58zM12 15.5A3.5 3.5 0 1 1 12 8a3.5 3.5 0 0 1 0 7.5z"></path>
          </svg>
        </button>
        <div class="settings-menu" aria-hidden="true">
          <button class="theme-btn ghost" type="button" onclick="toggleTheme()" aria-label="Toggle theme">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M21 14.5A8.5 8.5 0 1 1 9.5 3a7 7 0 0 0 11.5 11.5z"></path>
            </svg>
            <span class="theme-label">Light</span>
          </button>
          <a class="cta-btn admin-btn" id="adminLink" href="login.html">Admin Login</a>
          <button class="cta-btn logout-btn" id="logoutBtnMenu" type="button">Log out</button>
        </div>
      </div>
    </div>
  </nav>
  </header>

  <main class="visit-page">
    <section class="docs-card">
      <h2>Admin Login</h2>
      <p class="section-text">Sign in with Discord to access the panel.</p>
      <button class="cta-btn discord-btn" id="discordLogin" type="button">
        <svg class="discord-icon" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M20.317 4.369a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.211.375-.444.864-.608 1.249a18.27 18.27 0 0 0-5.487 0c-.164-.385-.397-.874-.608-1.249a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.683 4.37a.07.07 0 0 0-.032.027C.533 9.045-.32 13.58.099 18.057a.082.082 0 0 0 .031.056 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.461-.63.873-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128c.126-.094.252-.192.371-.291a.074.074 0 0 1 .077-.01c3.927 1.793 8.18 1.793 12.061 0a.074.074 0 0 1 .078.01c.12.099.245.197.372.291a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.106c.36.699.772 1.364 1.225 1.994a.076.076 0 0 0 .084.028 19.9 19.9 0 0 0 5.994-3.03.077.077 0 0 0 .03-.056c.5-5.177-.838-9.673-3.548-13.66a.061.061 0 0 0-.031-.03z"/>
        </svg>
        <span>Continue with Discord</span>
      </button>
      <p class="docs-note" id="loginStatus"></p>
    </section>
  </main>

  <footer class="footer">
    2026 BTE Canada Â· Not affiliated with Mojang
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="script.js"></script>
  <script>
    (function () {
      const supabaseConfig = window.APP_SUPABASE || {};
      const sbClient = window.APP_SUPABASE_CLIENT || window.supabase?.createClient(supabaseConfig.url, supabaseConfig.key);

      const btn = document.getElementById("discordLogin");
      const status = document.getElementById("loginStatus");

      btn.addEventListener("click", async () => {
        if (!sbClient) {
          status.textContent = "Supabase failed to load. Please refresh and try again.";
          return;
        }
        btn.disabled = true;
        status.textContent = "Redirecting to Discord...";
        const redirectTo = location.origin + (location.pathname.endsWith("/login") ? "/admin" : "/admin.html");
        const { error } = await sbClient.auth.signInWithOAuth({
          provider: "discord",
          options: { redirectTo }
        });
        if (error) {
          console.error("Discord login failed:", error);
          status.textContent = `Login failed: ${error.message}`;
          btn.disabled = false;
        }
      });
    })();
  </script>
</body>
</html>






